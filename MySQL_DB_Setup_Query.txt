CREATE DATABASE IF NOT EXISTS scrap_smart;
USE scrap_smart;

-- Users Table
CREATE TABLE IF NOT EXISTS users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    fname VARCHAR(100) NOT NULL,
    lname VARCHAR(100) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    phone VARCHAR(15) NOT NULL,
    password VARCHAR(255) NOT NULL,
    bname VARCHAR(100),
    role ENUM('buyer', 'seller', 'admin') DEFAULT 'buyer'
);

-- Scrap Requests Table
CREATE TABLE IF NOT EXISTS scrap_requests (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    scrap_name VARCHAR(100) NOT NULL,
    scrap_type VARCHAR(100) NOT NULL,
    weight_kg FLOAT DEFAULT 0,
    photo_url VARCHAR(255),
    descr VARCHAR(100) NOT NULL,
    unit_price FLOAT DEFAULT 0,
    address VARCHAR(100) NOT NULL,
    total_price FLOAT DEFAULT 0,
    status ENUM('pending', 'accepted', 'picked_up', 'completed') DEFAULT 'pending',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);
